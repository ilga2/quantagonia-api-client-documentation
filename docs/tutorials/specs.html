<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QUBO Solver Specifications &mdash; quantagonia-api-client - documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/icon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reference" href="../ref.html" />
    <link rel="prev" title="Converting from Ocean and Qiskit" href="converter.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            quantagonia-api-client
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="qubo_format.html">Quantagonia QUBO format</a></li>
<li class="toctree-l2"><a class="reference internal" href="model.html">Creating and Solving QUBO Problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="IP2Qubo.html">Solving IP and Conversion to QUBO</a></li>
<li class="toctree-l2"><a class="reference internal" href="converter.html">Converting from Ocean and Qiskit</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">QUBO Solver Specifications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#termination-settings">Termination Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#time-limit">Time limit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#max-number-of-nodes">Max number of nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#absolute-gap">Absolute gap</a></li>
<li class="toctree-l4"><a class="reference internal" href="#relative-gap">Relative gap</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#presolve-settings">Presolve settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#presolve">Presolve</a></li>
<li class="toctree-l4"><a class="reference internal" href="#coefficient-strenghtening">Coefficient strenghtening</a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-presolve">Node presolve</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#solution-strategy">Solution strategy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#enumeration">Enumeration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#default-solver-specification-file">Default Solver Specification File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ref.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">quantagonia-api-client</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Tutorials</a></li>
      <li class="breadcrumb-item active">QUBO Solver Specifications</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/specs.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="qubo-solver-specifications">
<h1>QUBO Solver Specifications<a class="headerlink" href="#qubo-solver-specifications" title="Permalink to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<p>Some solver options are useful to guide the solver behavior. For convenience, the most relevant options are exposed via the spec builder. You first set up the specs  :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">quantagonia.spec_builder</span> <span class="kn">import</span> <span class="n">QUBOSpecBuilder</span>
<span class="n">spec</span> <span class="o">=</span> <span class="n">QUBOSpecBuilder</span><span class="p">()</span>
</pre></div>
</div>
<p>It is also possible to provide a JSON file when instantiating the <code class="xref py py-class docutils literal notranslate"><span class="pre">QUBOSpecBuilder</span></code> to program the solver.
This is optional and when no file is given, a file containing the default options is used: <a class="reference internal" href="#default-specs-file-label"><span class="std std-ref">Default Solver Specification File</span></a>.</p>
<section id="termination-settings">
<h2>Termination Settings<a class="headerlink" href="#termination-settings" title="Permalink to this heading"></a></h2>
<p>Several options allows you to control the termination of the solver.</p>
<section id="time-limit">
<h3>Time limit<a class="headerlink" href="#time-limit" title="Permalink to this heading"></a></h3>
<p>We can set a time limit to interupt the solver after the given time and return the best found solution along with the optimality gap. The optimality gap tells you how much more potential there could be in the optimization process. Note that with ordinary quantum annealers you only retrieve a solution without knowing how far it might be away from an optimal solution.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">time_limit</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1"># seconds</span>
<span class="n">spec</span><span class="o">.</span><span class="n">set_time_limit</span><span class="p">(</span><span class="n">time_limit</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="max-number-of-nodes">
<h3>Max number of nodes<a class="headerlink" href="#max-number-of-nodes" title="Permalink to this heading"></a></h3>
<p>Limit the number of branch and bound nodes to be explored. Setting this number to 1 only solves the root node. This mimicks the behavior of ordinary (quantum) annealers which “only” return a solution without any quality assessment or proof of global optimality. When comparing to other quantum annealers, make sure to limit the number of nodes to 1.If the solution process is stopped after the maximum number of nodes is reached, our solver still returns an optimality gap which tells you how far away the true optimal solution potentially is. This is not the case with other ordinary (quantum) annealers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">num_nodes</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">spec</span><span class="o">.</span><span class="n">set_max_num_nodes</span><span class="p">(</span><span class="n">num_nodes</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="absolute-gap">
<h3>Absolute gap<a class="headerlink" href="#absolute-gap" title="Permalink to this heading"></a></h3>
<p>The solver terminates once the absolute gap reaches a default tolerance of 1e-9. The absolute gap is the difference between the objective value <span class="math notranslate nohighlight">\(f∗\)</span> of the best solution found and the best bound <span class="math notranslate nohighlight">\(fˉ​\)</span> on the objective value. Hence, the absolute gap tells you how much more the objective value could potentially increase if you continue the search. The tolerance for the absolute gap termination can be adjusted as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">abs_gap</span> <span class="o">=</span> <span class="mf">1e-6</span>
<span class="n">spec</span><span class="o">.</span><span class="n">set_absolute_gap</span><span class="p">(</span><span class="n">abs_gap</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="relative-gap">
<h3>Relative gap<a class="headerlink" href="#relative-gap" title="Permalink to this heading"></a></h3>
<p>The solver terminates once the relative gap reaches the default tolerance of 0.01% or 1e-4. The relative gap is defined as
<span class="math notranslate nohighlight">\(|f^\ast - \bar{f}|\, /\,  |f^\ast|\)</span>,
i.e., it is the improvement potential relative to the best-known objective value.The tolerance for the relative gap termination can be adjusted as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rel_gap</span> <span class="o">=</span> <span class="mf">1e-2</span>
<span class="n">spec</span><span class="o">.</span><span class="n">set_relative_gap</span><span class="p">(</span><span class="n">rel_gap</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="presolve-settings">
<h2>Presolve settings<a class="headerlink" href="#presolve-settings" title="Permalink to this heading"></a></h2>
<p>Before the actual solve, our solver performs various presolving routines on the full QUBO problem, e.g., fixing variables due to optimality arguments, deriving implications, etc., by default. You can control presolving with the following options.</p>
<section id="presolve">
<h3>Presolve<a class="headerlink" href="#presolve" title="Permalink to this heading"></a></h3>
<p>You can enable or disable presolve in general:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spec</span><span class="o">.</span><span class="n">set_presolve</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="coefficient-strenghtening">
<h3>Coefficient strenghtening<a class="headerlink" href="#coefficient-strenghtening" title="Permalink to this heading"></a></h3>
<p>Instead of enabling or disabling the full presolve, you can also control only some components of it. For example, you can enable coefficient strengthening, which is disabled by default:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spec</span><span class="o">.</span><span class="n">set_coeff_strengthening</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">UserWarning</span><span class="p">:</span> <span class="n">Setting</span> <span class="n">parameter</span> <span class="n">coeff_strengthening</span> <span class="n">to</span> <span class="kc">True</span> <span class="n">has</span> <span class="n">no</span> <span class="n">effect</span><span class="p">,</span> <span class="n">because</span> <span class="n">presolve</span> <span class="ow">is</span> <span class="n">disabled</span><span class="o">.</span> <span class="n">Enable</span> <span class="n">presolve</span> <span class="n">by</span> <span class="n">using</span> <span class="n">set_presolve</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
</section>
<section id="node-presolve">
<h3>Node presolve<a class="headerlink" href="#node-presolve" title="Permalink to this heading"></a></h3>
<p>Similar to the presolve on the full QUBO problem, our solver also performs some presolve routines for each sub-QUBO derived during the solution process. This behavior can be turned off:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spec</span><span class="o">.</span><span class="n">set_node_presolve</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="solution-strategy">
<h2>Solution strategy<a class="headerlink" href="#solution-strategy" title="Permalink to this heading"></a></h2>
<p>Usually, the default settings for the search strategy work just fine. However, for some instances, it may be beneficial to adjust the search strategy through the following options.</p>
<section id="enumeration">
<h3>Enumeration<a class="headerlink" href="#enumeration" title="Permalink to this heading"></a></h3>
<p>During the solution process, our solver solves many smaller sub-QUBOs. If these sub-QUBOs are small enough, we explicitly enumerate the solution space of the sub-QUBO, because this can be done extremely fast for small sub-QUBOs. This behavior may be turned off:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">spec</span><span class="o">.</span><span class="n">set_enumeration</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="default-solver-specification-file">
<span id="default-specs-file-label"></span><h2>Default Solver Specification File<a class="headerlink" href="#default-solver-specification-file" title="Permalink to this heading"></a></h2>
<p>This is the default solver specs json file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="s2">&quot;absolute_gap&quot;</span><span class="p">:</span> <span class="mf">1e-09</span><span class="p">,</span>
  <span class="s2">&quot;relative_gap&quot;</span><span class="p">:</span> <span class="mf">1e-4</span><span class="p">,</span>
  <span class="s2">&quot;time_limit&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
  <span class="s2">&quot;epsilon&quot;</span><span class="p">:</span> <span class="mf">1e-9</span><span class="p">,</span>
  <span class="s2">&quot;seed&quot;</span><span class="p">:</span> <span class="mi">36848232890347</span><span class="p">,</span>
  <span class="s2">&quot;presolve&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;coeff_strengthening&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;decompose&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;maxiter&quot;</span><span class="p">:</span> <span class="mi">100000</span>
  <span class="p">},</span>
  <span class="s2">&quot;node_presolve&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
  <span class="s2">&quot;branching_rule&quot;</span><span class="p">:</span> <span class="s2">&quot;MAX_CONTRIBUTION&quot;</span><span class="p">,</span>
  <span class="s2">&quot;branching_scoring&quot;</span> <span class="p">:</span> <span class="n">true</span><span class="p">,</span>
  <span class="s2">&quot;enumerate&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;enumeration_algorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;CPU_GRAY&quot;</span><span class="p">,</span>
    <span class="s2">&quot;enumeration_threshold&quot;</span><span class="p">:</span> <span class="mi">16</span>
  <span class="p">},</span>
  <span class="s2">&quot;primal_solver&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;NO_SOLVER&quot;</span><span class="p">,</span>
    <span class="s2">&quot;runs&quot;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="s2">&quot;dual_solver&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;runs&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FRANK_WOLFE&quot;</span><span class="p">,</span>
    <span class="s2">&quot;maxiter&quot;</span><span class="p">:</span> <span class="mi">500000</span><span class="p">,</span>
    <span class="s2">&quot;max_dual_gap&quot;</span><span class="p">:</span> <span class="mf">1e-02</span><span class="p">,</span>
    <span class="s2">&quot;max_rel_dual_gap&quot;</span><span class="p">:</span> <span class="mf">1e-05</span><span class="p">,</span>
    <span class="s2">&quot;smasher_step&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;smasher_eps&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="s2">&quot;dual_root_node_SDP&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;dual_fixings&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;convexification&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;SDP_SHIFT&quot;</span><span class="p">,</span>
      <span class="s2">&quot;variant&quot;</span><span class="p">:</span> <span class="s2">&quot;PROJECTION&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="converter.html" class="btn btn-neutral float-left" title="Converting from Ocean and Qiskit" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../ref.html" class="btn btn-neutral float-right" title="Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Anja Ilg.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>